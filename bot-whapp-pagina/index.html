<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Chat</title>
    <link rel="stylesheet" href="style.css">
    <script>
        // This will be dynamically injected by the Flask server
        window.API_BASE_URL = '{{ NGROK_URL | tojson }}';
    </script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Columna de la lista de conversaciones -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h3>Chats</h3>
            </div>
            <div id="conversation-list" class="conversation-list">
                <!-- Las conversaciones se cargarán aquí dinámicamente -->
                <div class="conversation-item">
                    <p>Cargando chats...</p>
                </div>
            </div>
        </div>

        <!-- Columna de la vista del chat -->
        <div class="chat-view" id="chat-view">
            <div id="chat-header" class="chat-header">
                <h3>Selecciona un chat para empezar</h3>
            </div>
            <div id="chat-messages" class="chat-messages">
                <!-- Los mensajes del chat seleccionado aparecerán aquí -->
                <div class="message received">
                    <p>Bienvenido al panel de control. Por favor, selecciona una conversación de la izquierda.</p>
                </div>
            </div>
            <div id="chat-input-container" class="chat-input-form" style="display: none;">
                <input type="text" id="message-input" placeholder="Escribe una respuesta manual...">
                <button id="send-button">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M1.101 21.757L23.8 12.028 1.101 2.3l.011 7.912 13.623 1.816-13.623 1.817-.011 7.912z"></path></svg>
                </button>
            </div>
        </div>
    </div>

    <div id="debug-controls" style="position: fixed; bottom: 10px; right: 10px; background: #fff; padding: 10px; border: 1px solid #ccc; z-index: 100;">
        <h4>Debug</h4>
        <button id="test-button">Test API</button>
        <pre id="log-output" style="max-height: 200px; overflow-y: auto; background: #f0f0f0; padding: 5px; margin-top: 5px;"></pre>
    </div>

    <script src="script.js"></script>
</body>
</html>